<?xml version="1.0"?>
<launch>
<!--    <param name="use_sim_time" value="true"/>
    <arg name="scan_topic"  default="scan" />
    <arg name="base_frame"  default="base_link"/>
    <arg name="odom_frame"  default="odom"/>-->

    <node pkg="gmapping" type="slam_gmapping" name="slam_gmapping" output="screen">
      <!-- 坐标系设置 -->
      <param name="base_frame" value="base_link" /> <!-- 机器人基座坐标系 -->
      <param name="odom_frame" value="odom" />      <!-- 里程计坐标系 -->

      <param name="map_update_interval" value="1.0"/>
      <!-- 地图更新间隔（秒） 
        参数影响：
           - 值越小（如0.5）：地图更新更频繁，建图实时性更好，但CPU占用率升高
           - 值越大（如5.0）：降低计算负载，但可能导致地图更新滞后

        推荐数值：
        - 快速移动场景（如竞速小车）：建议1.0-2.0秒
        - 精细建图场景（如室内导航）：建议3.0-5.0秒
      -->

      <!-- 激光雷达参数 -->
      <param name="maxUrange" value="5.0"/>       
       <!-- 最大有效测量距离（米） 
       参数影响：
           - 值过大（如20.0）：会包含更多噪声数据，导致地图出现"幽灵"障碍物
           - 值过小（如5.0）：可能忽略真实障碍物，导致地图残缺
        
        推荐数值：
           - 室内场景：3.0-8.0（走廊建议5.0，房间建议8.0）
           - 室外场景：10.0-15.0（需匹配激光雷达实际性能）
           - 默认值10.0适用于大多数中小型场地
      -->
      <param name="sigma" value="0.08"/>           
       <!-- 扫描匹配的噪声参数 
       参数影响：
           - 值越小（如0.01）：对激光数据更敏感，容易产生细节但可能放大噪声
           - 值越大（如0.1）：数据过滤更强，地图更平滑但可能丢失细节

        推荐数值：
           - 静态环境：0.05-0.08（走廊/房间）
           - 动态环境：0.1-0.2（有人走动/移动物体）
           - 默认值0.05适合大多数静态场景
       -->

      <!-- 扫描匹配参数 -->
      <param name="lstep" value="0.03"/>            
      <!-- 平移优化步长（米） 
      参数影响：
           - 值越小（如0.01）：扫描匹配更精细，但计算时间指数级增长
           - 值越大（如0.1）：加快计算速度，但可能导致地图错位
           
           推荐数值：
           - 高精度模式：0.01-0.03（适用于室内建图）
           - 平衡模式：0.05（默认值，适合大多数场景）
           - 快速模式：0.08-0.1（适合高速移动机器人）
      -->
      <param name="astep" value="0.05"/>            
      <!-- 旋转优化步长（弧度） 
      参数影响：
           - 值越小（如0.01）：提高旋转匹配精度，但显著增加计算时间
           - 值越大（如0.1）：加快扫描匹配速度，但可能导致角度偏差累积
           
      推荐数值：
           - 高精度模式：0.02-0.03（适用于需要精确角度对齐的场景）
           - 平衡模式：0.05（默认值，适合常规建图）
           - 快速响应模式：0.08-0.1（适合旋转速度快的机器人）
      -->
      <param name="iterations" value="8"/>          
      <!-- 优化迭代次数 
       参数影响：
           - 值越大（如10）：提高扫描匹配精度，但显著增加计算时间
           - 值越小（如3）：加快处理速度，但可能导致地图对齐不准确
           
        推荐数值：
           - 复杂环境（办公室）：8-12次
           - 常规场景（走廊）：5-8次
           - 简单环境（空旷场地）：3-5次
      -->

      <!-- 粒子滤波参数 -->
      <param name="particles" value="75"/>          
      <!-- 粒子数量（典型值30-200） 
        参数影响：
           - 值越大（如200）：建图精度越高，但CPU占用呈线性增长
           - 值越小（如30）：计算速度更快，但可能丢失地图细节
           
        推荐数值：
           - 简单环境（空旷场地）：30-50
           - 普通场景（家庭/办公室）：50-100
           - 复杂环境（多障碍物）：100-200
      -->
      <param name="minimumScore" value="90"/>       
      <!-- 接受扫描匹配的最低分数 
        参数影响：
           - 值越大（如100）：匹配要求更严格，地图更精确但更新频率降低
           - 值越小（如50）：更容易接受匹配结果，但可能引入错误地图数据
           
        推荐数值：
           - 高精度模式：80-100（适合静态环境）
           - 动态环境：50-70（容忍更多噪声）
           - 默认值80适合大多数场景
      -->

      <!-- 运动模型参数 -->
      <!-- 运动模型噪声参数（单位：米/弧度） -->
      <param name="srr" value="0.1"/>              
      <!-- 平移引起的平移误差系数 
           典型值：0.1-0.3
           - 值越大：认为平移运动的不确定性越高
           - 履带机器人建议0.2-0.3
           - 轮式机器人建议0.1-0.2 -->

      <param name="srt" value="0.2"/>              
      <!-- 旋转引起的平移误差系数 
           典型值：0.1-0.5
           - 值越大：认为旋转运动导致的平移误差越大
           - 差速转向机器人建议0.3-0.5
           - 全向轮机器人建议0.1-0.2 -->

      <param name="str" value="0.1"/>              
      <!-- 平移引起的旋转误差系数 
           典型值：0.05-0.2
           - 值越大：认为直线运动会导致更多方向偏差
           - 地面不平整时建议0.15-0.2
           - 平坦地面建议0.05-0.1 -->

      <param name="stt" value="0.2"/>              
      <!-- 旋转引起的旋转误差系数 
           典型值：0.1-0.3
           - 值越大：认为旋转运动的不确定性越高
           - 高速旋转建议0.2-0.3
           - 低速精准转向建议0.1-0.15 -->

      <!-- 地图参数 -->
      <param name="xmin" value="-2.0"/>            <!-- 地图初始边界X最小值 -->
      <param name="ymin" value="-6.0"/>            <!-- 地图初始边界Y最小值 -->
      <param name="xmax" value="8.0"/>             <!-- 地图初始边界X最大值 -->
      <param name="ymax" value="3.0"/>             <!-- 地图初始边界Y最大值 -->
      <param name="delta" value="0.05"/>           <!-- 地图分辨率（米/像素） -->
</node>
</launch>
