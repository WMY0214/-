# 机器人二维轮廓（单位：米），用于碰撞检测（矩形轮廓示例）
# 格式：[[x1,y1], [x2,y2], ...]（按顺时针/逆时针顺序排列）
footprint: [[-0.1, -0.1], [-0.1, 0.1], [0.1, 0.1], [0.1, -0.1]] 

# 静态地图层（用于加载预先构建的地图）
static_layer:
  enabled: true               # 启用静态地图层（建议保持true）
  map_topic: map              # 订阅的静态地图话题（需与建图节点发布的话题一致）
  unknown_cost_value: -1      # 未知区域的代价值（-1表示未知）
  lethal_cost_threshold: 100  # 视为致命障碍的最小代价值（0-255）
  first_map_only: false       # 是否仅使用初始地图（false表示允许地图更新）
  subscribe_to_updates: false # 是否订阅地图更新（false表示使用初始静态地图）
  track_unknown_space: false   # 是否跟踪未知区域（false时未知区域视为障碍）
  trinary_costmap: true       # 是否使用三值代价地图（true: 自由/障碍/未知）

# 动态障碍物层（处理传感器实时数据）
obstacle_layer:
  enabled: true               # 启用动态障碍物层（必须启用）
  observation_sources: scan   # 传感器源（可配置多个，用空格分隔）
  scan:                       # 激光雷达传感器配置
    topic: /scan              # 激光数据话题（需与实际传感器发布的话题一致）
    sensor_frame: laser       # 传感器坐标系（需与TF树中的坐标系一致）
    data_type: LaserScan      # 数据类型（LaserScan/PointCloud等）
    observation_persistence: 0.0  # 观测数据保留时间（0表示仅使用最新数据）
    expected_update_rate: 0.0  # 期望的更新频率（0表示不检查）
    clearing: true             # 是否清除旧障碍物（true: 允许传感器清除已消失的障碍）
    marking: true              # 是否标记新障碍物（true: 用传感器数据标记新障碍）
    max_obstacle_height: 0.2   # 障碍物最大高度（超过此高度的点被忽略）
    min_obstacle_height: 0.0   # 障碍物最小高度（低于此高度的点被忽略）
    obstacle_range: 5.0        # 有效障碍物检测范围（超过此距离的点不标记为障碍）
    # 参数影响：
    # - 值越大（如8.0）：提前检测远处障碍物（适合高速移动）
    # - 值越小（如3.0）：减少噪声干扰（适合低速或复杂环境）
    # 推荐数值（竞赛场景）：5.0-8.0（匹配激光雷达有效距离，兼顾实时性）
    raytrace_range: 5.0        # 射线追踪清除范围（用于清除传感器视野内的旧障碍）
    # 参数影响：
    # - 需≥obstacle_range，否则可能残留旧障碍物
    # 推荐数值（竞赛场景）：与obstacle_range相同（5.0-8.0）
  combination_method: 1       # 层融合方式（1: 覆盖模式，0: 叠加模式）

# 障碍物膨胀层（扩展障碍物安全区域）
inflation_layer:
  enabled: true               # 启用膨胀层（建议保持true）
  cost_scaling_factor: 10.0   # 代价缩放因子（值越大，安全区域代价衰减越快）
  # 参数影响：
  # - 值越大（如15.0）：路径更贴近障碍物（适合狭窄通道）
  # - 值越小（如5.0）：路径远离障碍物（安全但可能绕远）
  # 推荐数值（竞赛场景）：8.0-12.0（平衡安全与路径激进性
  inflation_radius: 0.1       # 膨胀半径（障碍物周围安全区域的半径，单位：米）
  # 参数影响：
  # - 值越大（如0.3）：安全区域更大（适合低速导航）
  # - 值越小（如0.1）：允许更激进的路径（适合竞速）
  # 推荐数值（竞赛场景）：0.1-0.2（匹配智能车尺寸，允许切弯）